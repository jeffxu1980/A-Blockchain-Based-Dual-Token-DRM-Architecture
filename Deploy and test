2. 部署与测试指南环境准备工具: Remix IDE环境: Ganache Provider (或 Remix VM - Cancun)账户: 准备至少两个账户（Account A 作为部署者/创作者，Account B 作为购买者）。步骤 1: 编译在 Remix 的 File Explorer 中创建 TrustedCulture.sol。粘贴上述代码。点击 Solidity Compiler 选项卡，选择版本 0.8.20，点击 Compile。步骤 2: 部署点击 Deploy & Run Transactions 选项卡。部署 NFT 合约:在 Contract 下拉框选择 CulturalAssetNFT。点击 Deploy。复制部署后的地址（例如 0xNFT...）。部署平台合约:在 Contract 下拉框选择 TrustedCulturePlatform。在 Deploy 按钮旁的输入框填入刚才复制的 NFT 地址 0xNFT...。点击 Deploy。步骤 3: 交互测试 (Test Scenarios)我们模拟论文中的流程：Minting (铸造) -> Pricing (定价) -> Buying (购买) -> Accessing (访问)。场景 A: 创作者铸造资产 (Infrastructure Layer)在 CulturalAssetNFT 合约下。调用 mintAsset:player: 使用 Account A 的地址。tokenURI: ipfs://QmTestHash123 (模拟 IPFS 哈希 1)。_culturalValue: 100 (设置初始文化价值 $C_k$).点击 transact。记下生成的 tokenId (通常是 1)。场景 B: 预言机更新市场数据 (Pricing Oracle)切换到 TrustedCulturePlatform 合约。确保当前 Account 是部署者（Admin）。调用 updateMarketValue:tokenId: 1_marketValue: 200 (模拟市场热度 $M_k$ 2)。场景 C: 用户查看动态价格 (Dynamic Pricing)调用 calculatePrice:tokenId: 1计算逻辑验证:公式: $100 \times C_k + 50 \times U_k + 20 \times M_k$初始: $100 \times 100 + 50 \times 0 + 20 \times 200 = 10000 + 4000 = 14000$ wei。输出应为 14000。场景 D: 用户购买访问权 (Atomic Swap)切换 Remix 账户为 Account B (消费者)。在 Value 输入框中填入 14000 Wei (或略多一点以防计算误差)。调用 buyAccess:tokenId: 1amount: 1点击 transact。观察:Account B 的 ETH 减少。Account A (NFT 所有者) 的 ETH 增加（模拟版税分发 3）。再次调用 calculatePrice，价格应该上涨，因为 $U_k$ (Usage) 增加了 1 ($50 \times 1$)。场景 E: 用户使用数据 (Access Control)保持使用 Account B。调用 consumeAccess:tokenId: 1点击 transact。在 Remix 控制台查看 Logs，应看到 AccessConsumed 事件，包含 "VIEW_3D_MODEL"，这证明了解密请求已被授权 4。查看 accessBalances (TokenID: 1, User: Account B)，余额应归零。
